branches:
  only:
  - netstandard
image: Visual Studio 2017
assembly_info:
  patch: false
environment:
  path_to_sln: Rhino.Licensing.sln
skip_tags: true
install:
  - choco install gitversion.portable -pre -y
  - cinst gitlink -version 2.4.1 -y
before_build:
- cmd: >-
- ps: gitversion /l console /output buildserver
- cmd: msbuild %path_to_sln% /t:restore /p:PackageVersion=%GitVersion_FullSemVer% /p:PackageId="Rhino.Licencing.DazinatorFork"
- cmd: nuget restore Rhino.Licensing.AdminTool/Rhino.Licensing.AdminTool.csproj
- cmd: nuget restore Rhino.Licensing.AdminTool.Tests/Rhino.Licensing.AdminTool.Tests.csproj
- cmd: nuget restore Rhino.Licensing.Tests/Rhino.Licensing.Tests.csproj
build:
  project: '%path_to_sln%'
  verbosity: minimal
after_build:
- cmd: gitlink . -u https://github.com/%APPVEYOR_REPO_NAME% -b %APPVEYOR_REPO_BRANCH% -s %APPVEYOR_REPO_COMMIT% -f %path_to_sln%
- cmd: msbuild %path_to_sln% /t:Pack /p:PackageVersion=%GitVersion_FullSemVer% /p:PackageId="Rhino.Licencing.DazinatorFork"
artifacts:
- path: '**/*.nupkg'
deploy:
  provider: NuGet
  api_key:
    secure: u8JpW5kkti8pMi+ra2QcXTJPhkHCA8pkKSiiZOJbcS/vFVHNvF3W8qw1Fy2If6a7
  skip_symbols: false
  artifact: /.*\.nupkg/